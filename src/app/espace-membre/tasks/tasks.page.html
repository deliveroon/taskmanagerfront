<h1 style="color: white;">Tâches</h1>

<app-task-card *ngFor="let task of tasks" [task]="task" [(users)]="users" (refreshOutput)="refreshData($event)"></app-task-card>

<ion-card>
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
        <ion-card-header>
            <ion-card-title>Nouvelle tâche</ion-card-title>
            <ion-item>
                <ion-label>Utilisateur</ion-label>
                    <ion-select okText="Valider" cancelText="Retour" id="user-input" formControlName="user">
                        <ion-select-option *ngFor="let user of users" value="{{user.id}}">{{user.username}}</ion-select-option>
                    </ion-select>
            </ion-item>
            <ion-item>
                <ion-label position="floating">Titre</ion-label>
                <ion-input id="title-input" formControlName="title"></ion-input>
            </ion-item>
        </ion-card-header>
        <ion-card-content>
            <ion-item>
                <ion-label position="floating">Description</ion-label>
                <ion-input id="description-input" formControlName="description"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label>Status</ion-label>
                    <ion-select okText="Valider" cancelText="Retour" id="status-input" formControlName="status">
                        <ion-select-option value="todo">To do</ion-select-option>
                        <ion-select-option value="inprogress">In progress</ion-select-option>
                        <ion-select-option value="finished">Finished</ion-select-option>
                    </ion-select>
            </ion-item>
            <ion-item>
                <ion-label>Priorité</ion-label>
                    <ion-select okText="Valider" cancelText="Retour" id="priorite-input" formControlName="priorite">
                        <ion-select-option value="low">Basse</ion-select-option>
                        <ion-select-option value="medium">Moyenne</ion-select-option>
                        <ion-select-option value="high">Haute</ion-select-option>
                        <ion-select-option value="critical">Critique</ion-select-option>
                    </ion-select>
            </ion-item>
        </ion-card-content>
        <ion-button [disabled]="!taskForm.valid" type="submit" shape="round">Créer</ion-button>
    </form>
</ion-card>





